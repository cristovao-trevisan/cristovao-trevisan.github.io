import{S as e,a as s,s as t,e as l,b as r,d as i,f as c,h as a,j as n,k as o,N as f,m as d,l as u,n as p,r as v,O as h,A as m,t as y,q as $,D as g,v as x,w as b,G as w,x as E,H as I,u as D,F as k,L as V}from"./index.9b1e5536.js";import{_}from"./index.es.ba205ebd.js";import"./index.bf84d3de.js";import{A as j}from"./AsyncImage.9e6eaa73.js";import{a as N}from"./_albuns.348cf5b3.js";function P(e){var s,t,h,m,y,$,g,x,b,w,E,I,D,k;return{c(){s=l("div"),t=l("div"),h=l("div"),m=r(),y=l("img"),$=r(),g=l("img"),x=r(),b=l("div"),w=l("div"),E=r(),I=l("div"),D=l("div"),this.h()},l(e){s=i(e,"DIV",{class:!0},!1);var l=c(s);t=i(l,"DIV",{class:!0},!1);var r=c(t);h=i(r,"DIV",{class:!0},!1),c(h).forEach(a),m=n(r),y=i(r,"IMG",{class:!0,src:!0,alt:!0},!1),c(y).forEach(a),$=n(r),g=i(r,"IMG",{class:!0,src:!0,alt:!0},!1),c(g).forEach(a),x=n(r),b=i(r,"DIV",{class:!0},!1);var o=c(b);w=i(o,"DIV",{class:!0},!1),c(w).forEach(a),o.forEach(a),E=n(r),I=i(r,"DIV",{class:!0},!1);var f=c(I);D=i(f,"DIV",{class:!0},!1),c(D).forEach(a),f.forEach(a),r.forEach(a),l.forEach(a),this.h()},h(){o(h,"class","mask svelte-1yy7ffd"),o(y,"class","blur svelte-1yy7ffd"),o(y,"src",e.initial),o(y,"alt","loading"),o(g,"class","image svelte-1yy7ffd"),o(g,"src",e.src),o(g,"alt","high resolution picture"),o(w,"class","icon svelte-1yy7ffd"),o(b,"class","icon-left svelte-1yy7ffd"),o(D,"class","icon svelte-1yy7ffd"),o(I,"class","icon-right svelte-1yy7ffd"),o(t,"class","container svelte-1yy7ffd"),o(s,"class","overlay svelte-1yy7ffd"),k=[f(window,"keydown",e.handleKeydown),f(h,"click",e.onClose),f(b,"click",e.onPrevious),f(I,"click",e.onNext)]},m(e,l){d(e,s,l),u(s,t),u(t,h),u(t,m),u(t,y),u(t,$),u(t,g),u(t,x),u(t,b),u(b,w),u(t,E),u(t,I),u(I,D)},p(e,s){e.initial&&o(y,"src",s.initial),e.src&&o(g,"src",s.src)},i:p,o:p,d(e){e&&a(s),v(k)}}}function A(e,s,t){let{initial:l,src:r}=s;const i=h(),c=()=>i("close"),a=()=>i("next"),n=()=>i("previous");return e.$set=e=>{"initial"in e&&t("initial",l=e.initial),"src"in e&&t("src",r=e.src)},{initial:l,src:r,onClose:c,onNext:a,onPrevious:n,handleKeydown:e=>{"Escape"===e.key?c():"ArrowRight"===e.key?a():"ArrowLeft"===e.key&&n()}}}class z extends e{constructor(e){super(),s(this,e,A,P,t,["initial","src"])}}function G(e,s,t){const l=Object.create(e);return l.picture=s[t],l.index=t,l}function M(e){var s,t=new z({props:{initial:e.folder+"/blur/"+e.selected,src:e.folder+"/2048px/"+e.selected}});return t.$on("close",e.removeSelection),t.$on("next",e.onNext),t.$on("previous",e.onPrevious),{c(){t.$$.fragment.c()},l(e){t.$$.fragment.l(e)},m(e,l){m(t,e,l),s=!0},p(e,s){var l={};(e.folder||e.selected)&&(l.initial=s.folder+"/blur/"+s.selected),(e.folder||e.selected)&&(l.src=s.folder+"/2048px/"+s.selected),t.$set(l)},i(e){s||(y(t.$$.fragment,e),s=!0)},o(e){$(t.$$.fragment,e),s=!1},d(e){g(t,e)}}}function S(e,s){var t,p,v,h,x=new j({props:{initial:s.folder+"/blur/"+s.picture,src:s.folder+"/400px/"+s.picture,alt:"picture-"+s.index}});return{key:e,first:null,c(){t=l("div"),x.$$.fragment.c(),p=r(),this.h()},l(e){t=i(e,"DIV",{class:!0},!1);var s=c(t);x.$$.fragment.l(s),p=n(s),s.forEach(a),this.h()},h(){o(t,"class","image-container hoverlay svelte-7fzsaw"),h=f(t,"click",s.selectPicture(s.picture,s.index)),this.first=t},m(e,s){d(e,t,s),m(x,t,null),u(t,p),v=!0},p(e,t){s=t;var l={};(e.folder||e.pictures)&&(l.initial=s.folder+"/blur/"+s.picture),(e.folder||e.pictures)&&(l.src=s.folder+"/400px/"+s.picture),e.pictures&&(l.alt="picture-"+s.index),x.$set(l)},i(e){v||(y(x.$$.fragment,e),v=!0)},o(e){$(x.$$.fragment,e),v=!1},d(e){e&&a(t),g(x),h()}}}function C(e){var s,t,f,p,v,h,m,g=e.$_("album",{title:e.$_(e.title)})+"",D=[],_=new Map,j=e.selected&&M(e);let N=e.pictures;const P=e=>e.picture;for(let s=0;s<N.length;s+=1){let t=G(e,N,s),l=P(t);_.set(l,D[s]=S(l,t))}return{c(){j&&j.c(),s=r(),t=l("div"),f=x(g),p=r(),v=l("div"),h=l("div");for(let e=0;e<D.length;e+=1)D[e].c();this.h()},l(e){j&&j.l(e),s=n(e),t=i(e,"DIV",{class:!0},!1);var l=c(t);f=b(l,g),l.forEach(a),p=n(e),v=i(e,"DIV",{class:!0},!1);var r=c(v);h=i(r,"DIV",{class:!0},!1);var o=c(h);for(let e=0;e<D.length;e+=1)D[e].l(o);o.forEach(a),r.forEach(a),this.h()},h(){o(t,"class","title svelte-7fzsaw"),o(h,"class","container svelte-7fzsaw"),o(v,"class","layout svelte-7fzsaw")},m(e,l){j&&j.m(e,l),d(e,s,l),d(e,t,l),u(t,f),d(e,p,l),d(e,v,l),u(v,h);for(let e=0;e<D.length;e+=1)D[e].m(h,null);m=!0},p(e,t){t.selected?j?(j.p(e,t),y(j,1)):((j=M(t)).c(),y(j,1),j.m(s.parentNode,s)):j&&(k(),$(j,1,1,()=>{j=null}),w()),m&&!e.$_&&!e.title||g===(g=t.$_("album",{title:t.$_(t.title)})+"")||E(f,g);const l=t.pictures;k(),D=I(D,e,P,1,t,l,_,h,V,S,null,G),w()},i(e){if(!m){y(j);for(let e=0;e<N.length;e+=1)y(D[e]);m=!0}},o(e){$(j);for(let e=0;e<D.length;e+=1)$(D[e]);m=!1},d(e){j&&j.d(e),e&&(a(s),a(t),a(p),a(v));for(let e=0;e<D.length;e+=1)D[e].d()}}}async function K(e,s){const{album:t}=e.params;return N.find(e=>e.title===t)}function L(e,s,t){let l;D(e,_,e=>{t("$_",l=e)});let{folder:r,pictures:i,title:c}=s,a=null,n=-1;return e.$set=e=>{"folder"in e&&t("folder",r=e.folder),"pictures"in e&&t("pictures",i=e.pictures),"title"in e&&t("title",c=e.title)},{folder:r,pictures:i,title:c,selected:a,selectPicture:(e,s)=>()=>{t("selected",a=e),n=s},removeSelection:()=>{t("selected",a=null)},onNext:()=>{n<i.length-1&&t("selected",a=i[n+=1])},onPrevious:()=>{n>0&&t("selected",a=i[n-=1])},$_:l}}export default class extends e{constructor(e){super(),s(this,e,L,C,t,["folder","pictures","title"])}}export{K as preload};
