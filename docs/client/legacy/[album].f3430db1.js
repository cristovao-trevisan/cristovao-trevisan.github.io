import{a as t,b as e,c as n,d as i,e as r,s,f as c,S as a,j as l,k as o,l as f,m as u,o as d,p as v,q as p,T as h,u as m,t as y,n as $,r as g,U as x,F as w,x as I,y as b,I as E,A as k,B as D,L as V,C as _,M as j,z as P,K as z,Q as A}from"./index.64510641.js";import{_ as N}from"./index.es.699a4b2c.js";import{_ as M,a as C}from"./asyncToGenerator.c0ef5a92.js";import"./index.af33885b.js";import{A as G}from"./AsyncImage.a1e6ec49.js";import{a as K}from"./_albuns.9e502ef3.js";function S(t){var e,n,i,r,s,c,a,x,w,I,b,E,k,D;return{c:function(){e=l("div"),n=l("div"),i=l("div"),r=o(),s=l("img"),c=o(),a=l("img"),x=o(),w=l("div"),I=l("div"),b=o(),E=l("div"),k=l("div"),this.h()},l:function(t){e=f(t,"DIV",{class:!0},!1);var l=u(e);n=f(l,"DIV",{class:!0},!1);var o=u(n);i=f(o,"DIV",{class:!0},!1),u(i).forEach(d),r=v(o),s=f(o,"IMG",{class:!0,src:!0,alt:!0},!1),u(s).forEach(d),c=v(o),a=f(o,"IMG",{class:!0,src:!0,alt:!0},!1),u(a).forEach(d),x=v(o),w=f(o,"DIV",{class:!0},!1);var p=u(w);I=f(p,"DIV",{class:!0},!1),u(I).forEach(d),p.forEach(d),b=v(o),E=f(o,"DIV",{class:!0},!1);var h=u(E);k=f(h,"DIV",{class:!0},!1),u(k).forEach(d),h.forEach(d),o.forEach(d),l.forEach(d),this.h()},h:function(){p(i,"class","mask svelte-1yy7ffd"),p(s,"class","blur svelte-1yy7ffd"),p(s,"src",t.initial),p(s,"alt","loading"),p(a,"class","image svelte-1yy7ffd"),p(a,"src",t.src),p(a,"alt","high resolution picture"),p(I,"class","icon svelte-1yy7ffd"),p(w,"class","icon-left svelte-1yy7ffd"),p(k,"class","icon svelte-1yy7ffd"),p(E,"class","icon-right svelte-1yy7ffd"),p(n,"class","container svelte-1yy7ffd"),p(e,"class","overlay svelte-1yy7ffd"),D=[h(window,"keydown",t.handleKeydown),h(i,"click",t.onClose),h(w,"click",t.onPrevious),h(E,"click",t.onNext)]},m:function(t,l){m(t,e,l),y(e,n),y(n,i),y(n,r),y(n,s),y(n,c),y(n,a),y(n,x),y(n,w),y(w,I),y(n,b),y(n,E),y(E,k)},p:function(t,e){t.initial&&p(s,"src",e.initial),t.src&&p(a,"src",e.src)},i:$,o:$,d:function(t){t&&d(e),g(D)}}}function L(t,e,n){var i=e.initial,r=e.src,s=x(),c=function(){return s("close")},a=function(){return s("next")},l=function(){return s("previous")};return t.$set=function(t){"initial"in t&&n("initial",i=t.initial),"src"in t&&n("src",r=t.src)},{initial:i,src:r,onClose:c,onNext:a,onPrevious:l,handleKeydown:function(t){"Escape"===t.key?c():"ArrowRight"===t.key?a():"ArrowLeft"===t.key&&l()}}}var T=function(l){function o(t){var a;return e(this,o),a=n(this,i(o).call(this)),r(c(a),t,L,S,s,["initial","src"]),a}return t(o,a),o}();function q(t,e,n){var i=Object.create(t);return i.picture=e[n],i.index=n,i}function B(t){var e,n=new T({props:{initial:t.folder+"/blur/"+t.selected,src:t.folder+"/2048px/"+t.selected}});return n.$on("close",t.removeSelection),n.$on("next",t.onNext),n.$on("previous",t.onPrevious),{c:function(){n.$$.fragment.c()},l:function(t){n.$$.fragment.l(t)},m:function(t,i){w(n,t,i),e=!0},p:function(t,e){var i={};(t.folder||t.selected)&&(i.initial=e.folder+"/blur/"+e.selected),(t.folder||t.selected)&&(i.src=e.folder+"/2048px/"+e.selected),n.$set(i)},i:function(t){e||(I(n.$$.fragment,t),e=!0)},o:function(t){b(n.$$.fragment,t),e=!1},d:function(t){E(n,t)}}}function F(t,e){var n,i,r,s,c=new G({props:{initial:e.folder+"/blur/"+e.picture,src:e.folder+"/400px/"+e.picture,alt:"picture-"+e.index}});return{key:t,first:null,c:function(){n=l("div"),c.$$.fragment.c(),i=o(),this.h()},l:function(t){n=f(t,"DIV",{class:!0},!1);var e=u(n);c.$$.fragment.l(e),i=v(e),e.forEach(d),this.h()},h:function(){p(n,"class","image-container hoverlay svelte-7fzsaw"),s=h(n,"click",e.selectPicture(e.picture,e.index)),this.first=n},m:function(t,e){m(t,n,e),w(c,n,null),y(n,i),r=!0},p:function(t,n){e=n;var i={};(t.folder||t.pictures)&&(i.initial=e.folder+"/blur/"+e.picture),(t.folder||t.pictures)&&(i.src=e.folder+"/400px/"+e.picture),t.pictures&&(i.alt="picture-"+e.index),c.$set(i)},i:function(t){r||(I(c.$$.fragment,t),r=!0)},o:function(t){b(c.$$.fragment,t),r=!1},d:function(t){t&&d(n),E(c),s()}}}function O(t){for(var e,n,i,r,s,c,a,h=t.$_("album",{title:t.$_(t.title)})+"",$=[],g=new Map,x=t.selected&&B(t),w=t.pictures,E=function(t){return t.picture},P=0;P<w.length;P+=1){var N=q(t,w,P),M=E(N);g.set(M,$[P]=F(M,N))}return{c:function(){x&&x.c(),e=o(),n=l("div"),i=k(h),r=o(),s=l("div"),c=l("div");for(var t=0;t<$.length;t+=1)$[t].c();this.h()},l:function(t){x&&x.l(t),e=v(t),n=f(t,"DIV",{class:!0},!1);var a=u(n);i=D(a,h),a.forEach(d),r=v(t),s=f(t,"DIV",{class:!0},!1);var l=u(s);c=f(l,"DIV",{class:!0},!1);for(var o=u(c),p=0;p<$.length;p+=1)$[p].l(o);o.forEach(d),l.forEach(d),this.h()},h:function(){p(n,"class","title svelte-7fzsaw"),p(c,"class","container svelte-7fzsaw"),p(s,"class","layout svelte-7fzsaw")},m:function(t,l){x&&x.m(t,l),m(t,e,l),m(t,n,l),y(n,i),m(t,r,l),m(t,s,l),y(s,c);for(var o=0;o<$.length;o+=1)$[o].m(c,null);a=!0},p:function(t,n){n.selected?x?(x.p(t,n),I(x,1)):((x=B(n)).c(),I(x,1),x.m(e.parentNode,e)):x&&(z(),b(x,1,1,(function(){x=null})),V()),a&&!t.$_&&!t.title||h===(h=n.$_("album",{title:n.$_(n.title)})+"")||_(i,h);var r=n.pictures;z(),$=j($,t,E,1,n,r,g,c,A,F,null,q),V()},i:function(t){if(!a){I(x);for(var e=0;e<w.length;e+=1)I($[e]);a=!0}},o:function(t){b(x);for(var e=0;e<$.length;e+=1)b($[e]);a=!1},d:function(t){x&&x.d(t),t&&(d(e),d(n),d(r),d(s));for(var i=0;i<$.length;i+=1)$[i].d()}}}function Q(t,e){return R.apply(this,arguments)}function R(){return(R=M(C.mark((function t(e,n){var i;return C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.params.album,t.abrupt("return",K.find((function(t){return t.title===i})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(t,e,n){var i;P(t,N,(function(t){n("$_",i=t)}));var r=e.folder,s=e.pictures,c=e.title,a=null,l=-1;return t.$set=function(t){"folder"in t&&n("folder",r=t.folder),"pictures"in t&&n("pictures",s=t.pictures),"title"in t&&n("title",c=t.title)},{folder:r,pictures:s,title:c,selected:a,selectPicture:function(t,e){return function(){n("selected",a=t),l=e}},removeSelection:function(){n("selected",a=null)},onNext:function(){l<s.length-1&&n("selected",a=s[l+=1])},onPrevious:function(){l>0&&n("selected",a=s[l-=1])},$_:i}}var H=function(l){function o(t){var a;return e(this,o),a=n(this,i(o).call(this)),r(c(a),t,U,O,s,["folder","pictures","title"]),a}return t(o,a),o}();export default H;export{Q as preload};
