import{S as e,a as t,s,e as l,o as r,d as c,f as i,j as a,h as n,I as o,k as u,l as d,n as f,r as h,J as v,u as m,t as p,y as g,z as $,m as x,A as N,G as b,C as k,x as y}from"./chunk.af07e894.js";import{_ as E}from"./chunk.c28bb2eb.js";import"./chunk.198d4029.js";import{A as I}from"./chunk.d9b74c78.js";import{a as D}from"./chunk.4a35cc55.js";function V(e){var t,s,v,m,p,g,$,x,N,b,k,y,E,I;return{c(){t=l("div"),s=l("div"),v=l("div"),m=r(),p=l("img"),g=r(),$=l("img"),x=r(),N=l("div"),b=l("div"),k=r(),y=l("div"),E=l("div"),this.h()},l(e){t=c(e,"DIV",{class:!0},!1);var l=i(t);s=c(l,"DIV",{class:!0},!1);var r=i(s);v=c(r,"DIV",{class:!0},!1),i(v).forEach(a),m=n(r,"\n    "),p=c(r,"IMG",{class:!0,src:!0,alt:!0},!1),i(p).forEach(a),g=n(r,"\n    "),$=c(r,"IMG",{class:!0,src:!0,alt:!0},!1),i($).forEach(a),x=n(r,"\n    "),N=c(r,"DIV",{class:!0},!1);var o=i(N);b=c(o,"DIV",{class:!0},!1),i(b).forEach(a),o.forEach(a),k=n(r,"\n    "),y=c(r,"DIV",{class:!0},!1);var u=i(y);E=c(u,"DIV",{class:!0},!1),i(E).forEach(a),u.forEach(a),r.forEach(a),l.forEach(a),this.h()},h(){v.className="mask svelte-367gcx",p.className="blur svelte-367gcx",p.src=e.initial,p.alt="loading",$.className="image svelte-367gcx",$.src=e.src,$.alt="high resolution picture",b.className="icon svelte-367gcx",N.className="icon-left svelte-367gcx",E.className="icon svelte-367gcx",y.className="icon-right svelte-367gcx",s.className="container svelte-367gcx",t.className="overlay svelte-367gcx",I=[o(window,"keydown",e.handleKeydown),o(v,"click",e.onClose),o(N,"click",e.onPrevious),o(y,"click",e.onNext)]},m(e,l){u(e,t,l),d(t,s),d(s,v),d(s,m),d(s,p),d(s,g),d(s,$),d(s,x),d(s,N),d(N,b),d(s,k),d(s,y),d(y,E)},p(e,t){e.initial&&(p.src=t.initial),e.src&&($.src=t.src)},i:f,o:f,d(e){e&&a(t),h(I)}}}function w(e,t,s){let{initial:l,src:r}=t;const c=v(),i=()=>c("close"),a=()=>c("next"),n=()=>c("previous");return e.$set=(e=>{"initial"in e&&s("initial",l=e.initial),"src"in e&&s("src",r=e.src)}),{initial:l,src:r,onClose:i,onNext:a,onPrevious:n,handleKeydown:e=>{"Escape"===e.key?i():"ArrowRight"===e.key?a():"ArrowLeft"===e.key&&n()}}}class j extends e{constructor(e){super(),t(this,e,w,V,s,["initial","src"])}}function _(e,t,s){const l=Object.create(e);return l.picture=t[s],l.index=s,l}function P(e){var t,s=new j({props:{initial:e.folder+"/blur/"+e.selected,src:e.folder+"/2048px/"+e.selected}});return s.$on("close",e.removeSelection),s.$on("next",e.onNext),s.$on("previous",e.onPrevious),{c(){s.$$.fragment.c()},l(e){s.$$.fragment.l(e)},m(e,l){m(s,e,l),t=!0},p(e,t){var l={};(e.folder||e.selected)&&(l.initial=t.folder+"/blur/"+t.selected),(e.folder||e.selected)&&(l.src=t.folder+"/2048px/"+t.selected),s.$set(l)},i(e){t||(s.$$.fragment.i(e),t=!0)},o(e){s.$$.fragment.o(e),t=!1},d(e){s.$destroy(e)}}}function A(e,t){var s,f,h,v,p=new I({props:{initial:t.folder+"/blur/"+t.picture,src:t.folder+"/400px/"+t.picture,alt:"picture-"+t.index}});return{key:e,first:null,c(){s=l("div"),p.$$.fragment.c(),f=r(),this.h()},l(e){s=c(e,"DIV",{class:!0},!1);var t=i(s);p.$$.fragment.l(t),f=n(t,"\n      "),t.forEach(a),this.h()},h(){s.className="image-container hoverlay svelte-13but6l",v=o(s,"click",t.selectPicture(t.picture,t.index)),this.first=s},m(e,t){u(e,s,t),m(p,s,null),d(s,f),h=!0},p(e,s){t=s;var l={};(e.folder||e.pictures)&&(l.initial=t.folder+"/blur/"+t.picture),(e.folder||e.pictures)&&(l.src=t.folder+"/400px/"+t.picture),e.pictures&&(l.alt="picture-"+t.index),p.$set(l)},i(e){h||(p.$$.fragment.i(e),h=!0)},o(e){p.$$.fragment.o(e),h=!1},d(e){e&&a(s),p.$destroy(),v()}}}function C(e){var t,s,o,f,h,v,m,k=e.$_("album",{title:e.$_(e.title)}),E=[],I=new Map,D=e.selected&&P(e),V=e.pictures;const w=e=>e.picture;for(var j=0;j<V.length;j+=1){let t=_(e,V,j),s=w(t);I.set(s,E[j]=A(s,t))}return{c(){for(D&&D.c(),t=r(),s=l("div"),o=p(k),f=r(),h=l("div"),v=l("div"),j=0;j<E.length;j+=1)E[j].c();this.h()},l(e){D&&D.l(e),t=n(e,"\n\n"),s=c(e,"DIV",{class:!0},!1);var l=i(s);o=n(l,k),l.forEach(a),f=n(e,"\n\n"),h=c(e,"DIV",{class:!0},!1);var r=i(h);v=c(r,"DIV",{class:!0},!1);var u=i(v);for(j=0;j<E.length;j+=1)E[j].l(u);u.forEach(a),r.forEach(a),this.h()},h(){s.className="title svelte-13but6l",v.className="container svelte-13but6l",h.className="layout svelte-13but6l"},m(e,l){for(D&&D.m(e,l),u(e,t,l),u(e,s,l),d(s,o),u(e,f,l),u(e,h,l),d(h,v),j=0;j<E.length;j+=1)E[j].m(v,null);m=!0},p(e,s){s.selected?D?(D.p(e,s),D.i(1)):((D=P(s)).c(),D.i(1),D.m(t.parentNode,t)):D&&(y(),g(()=>{D.d(1),D=null}),D.o(1),$()),m&&!e.$_&&!e.title||k===(k=s.$_("album",{title:s.$_(s.title)}))||x(o,k);const l=s.pictures;y(),E=N(E,e,w,1,s,l,I,v,b,A,null,_),$()},i(e){if(!m){D&&D.i();for(var t=0;t<V.length;t+=1)E[t].i();m=!0}},o(e){for(D&&D.o(),j=0;j<E.length;j+=1)E[j].o();m=!1},d(e){for(D&&D.d(e),e&&(a(t),a(s),a(f),a(h)),j=0;j<E.length;j+=1)E[j].d()}}}async function G(e,t){const{album:s}=e.params;return D.find(e=>e.title===s)}function M(e,t,s){let l;k(e,E,e=>{s("$_",l=e)});let{folder:r,pictures:c,title:i}=t,a=null,n=-1;return e.$set=(e=>{"folder"in e&&s("folder",r=e.folder),"pictures"in e&&s("pictures",c=e.pictures),"title"in e&&s("title",i=e.title)}),{folder:r,pictures:c,title:i,selected:a,selectPicture:(e,t)=>()=>{s("selected",a=e),n=t},removeSelection:()=>{s("selected",a=null)},onNext:()=>{n<c.length-1&&s("selected",a=c[n+=1])},onPrevious:()=>{n>0&&s("selected",a=c[n-=1])},$_:l}}export default class extends e{constructor(e){super(),t(this,e,M,C,s,["folder","pictures","title"])}}export{G as preload};
//# sourceMappingURL=[album].ff05ca81.js.map
