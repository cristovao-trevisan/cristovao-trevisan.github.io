{"version":3,"file":"[album].ff05ca81.js","sources":["../../../src/components/gallery/FullScreenImage.svelte","../../../src/routes/artist/gallery/album/[album].svelte"],"sourcesContent":["<script>\n  import { createEventDispatcher } from 'svelte'\n  import { ArrowRightIcon } from 'svelte-feather-icons'\n\n  export let initial\n  export let src\n\n  const dispatch = createEventDispatcher()\n  const onClose = () => dispatch('close')\n  const onNext = () => dispatch('next')\n  const onPrevious = () => dispatch('previous')\n\n  const handleKeydown = (e) => {\n    if (e.key === 'Escape') onClose()\n    else if (e.key === 'ArrowRight') onNext()\n    else if (e.key === 'ArrowLeft') onPrevious()\n  }\n</script>\n\n<svelte:window on:keydown={handleKeydown}/>\n\n<div class=\"overlay\">\n  <div class=\"container\">\n    <div class=\"mask\" on:click={onClose} />\n    <img class=\"blur\" src={initial} alt=\"loading\" />\n    <img class=\"image\" src={src} alt=\"high resolution picture\" />\n    <div class=\"icon-left\" on:click={onPrevious}> <div class=\"icon\" /> </div>\n    <div class=\"icon-right\" on:click={onNext}> <div class=\"icon\" /> </div>\n  </div>\n</div>\n\n<style>\n  .overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tz-index: 999;\n\t\theight: 100vh;\n\t\twidth: 100vw;\n  }\n  .container {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .mask {\n    position: absolute;\n    background-color: black;\n    opacity: 0.4;\n    width: 100%;\n    height: 100%;\n    top: 0;\n\t\tleft: 0;\n  }\n  .image {\n    background-color: #00000006;\n  }\n  .blur {\n    position: absolute;\n    max-width: 78%;\n    pointer-events: none;\n  }\n  img {\n    z-index: 1;\n    object-fit: contain;\n    width: 80%;\n    max-width: 2048px;\n    height: auto;\n    max-height: 80%;\n    text-align: center;\n  }\n\n  .icon-right, .icon-left {\n    z-index: 2;\n    position: absolute;\n    width: 80px;\n    height: 100px;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    cursor: pointer;\n  }\n  .icon-right { right: calc(5% - 18.5px); }\n  .icon-left { left: calc(5% - 18.5px); transform: rotate(180deg); }\n\n  .icon {\n    width: 37px;\n    height: 56px;\n    position: relative;\n    right: calc(5% - 8px);\n    overflow: hidden;\n  }\n  .icon:before {\n    content: \"\";\n    position: absolute;\n    width: 10px;\n    height: 40px;\n    background-color: white;\n    transform: rotate(35deg);\n    top: 21px;\n    right: 50%;\n  }\n  .icon:after {\n    content: \"\";\n    position: absolute;\n    width: 10px;\n    height: 40px;\n    background-color: white;\n    transform: rotate(-35deg);\n    bottom: 21px;\n    right: 50%;\n  } \n</style>\n","<script context=\"module\">\n  import albuns from '../_albuns'\n\n\texport async function preload(page, session) {\n\t\tconst { album } = page.params;\n\t\treturn albuns.find(ab => ab.title === album)\n\t}\n</script>\n\n<script>\n  import { _ } from 'svelte-3-intl'\n  import { onMount } from 'svelte'\n  import AsyncImage from '../../../../components/gallery/AsyncImage.svelte'\n  import FullScreenImage from '../../../../components/gallery/FullScreenImage.svelte'\n\n  export let folder\n  export let pictures\n  export let title\n\n  let selected = null\n  let selectedIndex = -1\n\n  const selectPicture = (picture, index) => () => {\n    selected = picture\n    selectedIndex = index\n  }\n  const removeSelection = () => { selected = null }\n  const onNext = () => {\n    if (selectedIndex < pictures.length - 1) {\n      selectedIndex += 1\n      selected = pictures[selectedIndex]\n    }\n  }\n  const onPrevious = () => {\n    if (selectedIndex > 0) {\n        selectedIndex -= 1\n        selected = pictures[selectedIndex]\n      }\n  }\n</script>\n\n{#if selected}\n  <FullScreenImage\n    on:close={removeSelection}\n    on:next={onNext}\n    on:previous={onPrevious}\n    initial=\"{folder}/blur/{selected}\"\n    src=\"{folder}/2048px/{selected}\"\n  />\n{/if}\n\n<div class=\"title\">\n  {$_('album', { title: $_(title) })}\n</div>\n\n<div class=\"layout\">\n  <div class=\"container\">\n    {#each pictures as picture, index (picture)}\n      <div class=\"image-container hoverlay\" on:click={selectPicture(picture, index)}>\n        <AsyncImage\n          initial=\"{folder}/blur/{picture}\"\n          src=\"{folder}/400px/{picture}\"\n          alt=\"picture-{index}\"\n        />\n      </div>\n    {/each}\n  </div>\n</div>\n\n<style lang=\"scss\">\n  @import '../../../../style/shadows.scss';\n\n  .title {\n    margin-left: calc(5% + 10px);\n    margin-top: 16px;\n    font-family: 'Street Slab';\n    font-size: 16px;\n  }\n  .layout {\n    display: flex;\n    justify-content: center;\n    margin-top: 16px;\n  }\n  .container {\n    width: 100%;\n    max-width: 1024px;\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    flex-wrap: wrap;\n  }\n  .image-container {\n    position: relative;\n    margin: 4px;\n    width: calc(50% - 16px);\n    max-width: 200px;\n    height: 200px;\n    box-shadow: $shadow-2;\n    border-radius: 8px;\n    overflow: hidden;\n    cursor: pointer;\n  }\n</style>\n"],"names":["initial","src","handleKeydown","onClose","onPrevious","onNext","dispatch","createEventDispatcher","e","key","folder","selected","removeSelection","picture","index","selectPicture","$_","title","pictures","length","async","preload","page","session","album","params","albuns","find","ab","selectedIndex"],"mappings":"knCAwB2BA,kEACCC,qRANDC,6BAIKC,uBAGKC,0BACCC,0IAHXL,yBACCC,oDArB1B,YAAWD,EAAOC,IACPA,KAEX,MAAMK,EAAWC,IACXJ,EAAU,IAAMG,EAAS,SACzBD,EAAS,IAAMC,EAAS,QACxBF,EAAa,IAAME,EAAS,oKAEXE,IACP,WAAVA,EAAEC,IAAkBN,IACL,eAAVK,EAAEC,IAAsBJ,IACd,cAAVG,EAAEC,KAAqBL,6MC+BtBM,kBAAcC,eAClBD,oBAAgBC,mCAJZC,gCACDP,2BACID,wIACHM,kBAAcC,2CAClBD,oBAAgBC,iKAaND,kBAAcG,cAClBH,mBAAeG,yBACPC,mQAJ8BC,gBAAcF,UAASC,wHAEzDJ,kBAAcG,0CAClBH,mBAAeG,yCACPC,uJAVrBE,GAAG,QAAS,CAAEC,QAAOD,KAAGC,4BAXd,mBAgBFC,sBAA4BL,wBAAjCM,4IAAAA,8NAAAA,8PAAAA,0CAhBDR,+IAWFK,GAAG,QAAS,CAAEC,QAAOD,KAAGC,4BAKhBC,uFAALC,sDAAAA,+EAAAA,uBAtDEC,eAAeC,EAAQC,EAAMC,GACnC,MAAMC,MAAEA,GAAUF,EAAKG,OACvB,OAAOC,EAAOC,KAAKC,GAAMA,EAAGX,QAAUO,mDAU/B,WAAId,EAAMQ,SACNA,EAAQD,MACRA,KAEPN,EAAW,KACXkB,GAAiB,+LAEC,CAAChB,EAASC,IAAU,kBACxCH,EAAWE,GACXgB,EAAgBf,mBAEM,kBAAQH,EAAW,cAC5B,KACTkB,EAAgBX,EAASC,OAAS,gBAEpCR,EAAWO,EADXW,GAAiB,gBAIF,KACbA,EAAgB,gBAEhBlB,EAAWO,EADXW,GAAiB"}